@import '@stylesheet/_config.scss';

.wrap_pie {
  width: 100%;
  height: 300px;
  margin-bottom: 30px;
  .pie {
    border-radius: 100%;
    height: 300px;
    position: relative;
    width: 300px;
    overflow: hidden;
    @for $i from 1 through length($chart-rank) {
      $c: nth($chart-rank, $i);

      .rank-#{$i}::after,
      .rank-#{$i}::before {
        background-color: $c;
      }
    }
    .pie__segment::after,
    .pie__segment::before {
      content: '';
      height: 100%;
      width: 100%;
      position: absolute;
    }
    .pie__segment::after {
      opacity: var(--over50, 0);
    }
    .pie__segment {
      --degrees: calc((var(--offset, 0) / 100) * 360);
      height: 100%;
      width: 100%;
      position: absolute;
      transform: translate(0, -50%) rotate(90deg)
        rotate(calc(var(--degrees, 0) * 1deg));
      transform-origin: 50% 100%;
      --a: calc(var(--over50, 0) * -100%);
      --b: calc((1 + var(--over50, 0)) * 100%);
      clip-path: polygon(
        var(--a) var(--a),
        var(--b) var(--a),
        var(--b) var(--b),
        var(--a) var(--b)
      );
      -webkit-clip-path: polygon(
        var(--a) var(--a),
        var(--b) var(--a),
        var(--b) var(--b),
        var(--a) var(--b)
      );
    }
    .pie__segment::before {
      --degrees: calc((var(--value, 45) / 100) * 360);
      transform: translate(0, 100%) rotate(calc(var(--degrees, 45) * 1deg));
      transform-origin: 50% 0;
    }
  }
}
